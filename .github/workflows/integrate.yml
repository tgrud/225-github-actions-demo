name: Node Continuous Integration

on:
  pull_request:
    branches: [ master ]

jobs:
  test_pull_request:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v1
        with:
          node-version: 12
      - name: Test env
        run: echo Hello world $FIRST_NAME $middle_name $Last_Name!
        env:
          FIRST_NAME: Mona
          middle_name: The
          Last_Name: Octocat
      - name: Test secret
        run: echo Hello world $shh
        env:
          shh: ${{ secrets.TIM_SECRET }}
      - run: npm ci
      - run: testVar="TIM"
      - run: echo $testVar
      - run: git branch --show-current
      - run: git branch -a
      - run: git log
      - run: git status
      - run: cat public/404.html

      - run: npm test
      - run: npm run build
